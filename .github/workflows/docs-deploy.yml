# Auto-generated by gaji
# Do not edit manually - Edit workflows/docs-deploy.ts instead
# Generated at: 2026-02-23T22:09:58Z

concurrency:
  cancel-in-progress: false
  group: github-pages
jobs:
  deploy:
    permissions:
      contents: write
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v5
      with:
        fetch-depth: 0
    - uses: actions/setup-node@v4
      with:
        cache: npm
        cache-dependency-path: docs/package-lock.json
        node-version: '22'
    - name: Install
      run: npm ci
      working-directory: docs
    - name: Build (latest)
      run: npm run build
      working-directory: docs
    - name: Deploy latest
      uses: peaceiris/actions-gh-pages@v4
      with:
        commit_message: 'docs: deploy latest (master)'
        destination_dir: .
        github_token: ${{ secrets.GITHUB_TOKEN }}
        keep_files: true
        publish_dir: docs/.vitepress/dist
    - env:
        VITEPRESS_BASE: /husako/${{ github.ref_name }}/
      if: ${{ startsWith(github.ref, 'refs/tags/v') }}
      name: Build (versioned)
      run: npm run build
      working-directory: docs
    - if: ${{ startsWith(github.ref, 'refs/tags/v') }}
      name: Archive version
      uses: peaceiris/actions-gh-pages@v4
      with:
        commit_message: 'docs: archive ${{ github.ref_name }}'
        destination_dir: ${{ github.ref_name }}
        github_token: ${{ secrets.GITHUB_TOKEN }}
        keep_files: true
        publish_dir: docs/.vitepress/dist
name: Deploy Docs
on:
  push:
    branches:
    - master
    paths:
    - docs/**
    tags:
    - v*
  workflow_dispatch: {}
