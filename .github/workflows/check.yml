# Auto-generated by gaji
# Do not edit manually - Edit workflows/check.ts instead
# Generated at: 2026-02-25T04:46:26Z

jobs:
  e2e:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v5
    - uses: dtolnay/rust-toolchain@stable
    - uses: Swatinem/rust-cache@v2
    - name: Cache husako downloads (Scenario A)
      uses: actions/cache@v4
      with:
        key: ${{ runner.os }}-husako-e2e-${{ hashFiles('test/e2e/husako.toml') }}
        path: test/e2e/.husako/cache
    - name: Install kubeconform
      run: |-
        curl -sL "https://github.com/yannh/kubeconform/releases/download/v0.7.0/kubeconform-linux-amd64.tar.gz" | tar xz
        chmod +x kubeconform && sudo mv kubeconform /usr/local/bin/kubeconform
    - name: E2E tests
      run: cargo test -p husako --test e2e_a --test e2e_b --test e2e_c --test e2e_d --test e2e_e --test e2e_f --test e2e_g -- --include-ignored
  lint:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v5
    - uses: dtolnay/rust-toolchain@stable
      with:
        components: clippy,rustfmt
    - uses: Swatinem/rust-cache@v2
    - name: Format check
      run: cargo fmt --all --check
    - name: Clippy
      run: cargo clippy --workspace --all-targets --all-features -- -D warnings
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v5
    - uses: dtolnay/rust-toolchain@stable
    - uses: Swatinem/rust-cache@v2
    - name: Run tests
      run: cargo test --workspace --all-features
name: Check
on:
  pull_request:
    branches:
    - master
  push:
    branches:
    - master
